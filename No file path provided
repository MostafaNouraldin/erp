لتتمكن من إضافة أو تعديل الأدوار (المسميات الوظيفية) وتحديد الصلاحيات لكل دور (عرض، تعديل، حذف، الكل) داخل كل موديول، يمكنك اتباع الخطوات التالية بناءً على الهيكل الحالي للنظام في صفحة "الإعدادات":

**1. إضافة أو تعديل دور (مسمى وظيفي):**

*   اذهب إلى قسم **الإعدادات** في القائمة الجانبية.
*   اختر تبويب "**الأدوار والصلاحيات**".
*   **لإضافة دور جديد:**
    *   اضغط على زر "**إضافة دور جديد**".
    *   في النافذة المنبثقة، أدخل:
        *   **اسم الدور:** (مثال: "مدير مبيعات", "محاسب", "موظف موارد بشرية").
        *   **وصف الدور:** (مثال: "مسؤول عن عمليات البيع وعروض الأسعار").
    *   اضغط على "**إضافة الدور**".
*   **لتعديل دور موجود:**
    *   من قائمة الأدوار على اليمين، اضغط على الدور الذي ترغب في تعديله.
    *   ستظهر تفاصيل الدور، اضغط على أيقونة التعديل (القلم) بجانب اسم الدور.
    *   في النافذة المنبثقة، قم بتعديل الاسم أو الوصف.
    *   اضغط على "**حفظ التعديلات**".

**2. تحديد الصلاحيات لكل دور داخل كل موديول:**

*   بعد اختيار دور معين من القائمة (أو بعد إضافة دور جديد مباشرة)، سيظهر قسم "**صلاحيات الدور: \[اسم الدور المختار]**" على اليسار.
*   في هذا القسم، سترى قائمة بالمواديات المتاحة في النظام (مثل: الحسابات، المبيعات، المخزون، إلخ).
*   تحت كل موديول، ستجد قائمة بالصلاحيات المتاحة لهذا الموديول (مثال: `view` (عرض)، `create` (إنشاء)، `edit` (تعديل)، `delete` (حذف)، وأحيانًا صلاحيات خاصة مثل `approve` (اعتماد)).
*   **لتحديد الصلاحيات:**
    *   لكل صلاحية (مثل "عرض" تحت موديول "المبيعات")، ستجد مربع اختيار (Checkbox).
    *   **قم بتحديد (وضع علامة صح)** المربعات الخاصة بالصلاحيات التي تريد منحها لهذا الدور داخل هذا الموديول.
    *   **لإلغاء صلاحية،** قم بإزالة علامة الصح من المربع الخاص بها.
    *   **لإعطاء صلاحية "الكل" (Full Control) على موديول معين،** قم بتحديد جميع مربعات الاختيار تحت ذلك الموديول.
*   **حفظ الصلاحيات:**
    *   بعد الانتهاء من تحديد جميع الصلاحيات المطلوبة للدور المختار عبر جميع الموديولات، اضغط على زر "**حفظ صلاحيات هذا الدور**" الموجود أسفل قائمة الصلاحيات.
    *   ستظهر رسالة تأكيد بحفظ الصلاحيات.

**مثال توضيحي:**

لنفترض أنك تريد إنشاء دور "محاسب مبتدئ" وتعطيه صلاحيات محددة:

1.  **إضافة الدور:**
    *   اضغط "إضافة دور جديد".
    *   اسم الدور: "محاسب مبتدئ".
    *   وصف الدور: "يقوم بإدخال القيود اليومية وعرض التقارير المحاسبية الأساسية".
    *   اضغط "إضافة الدور".
2.  **تحديد الصلاحيات (بافتراض أن دور "محاسب مبتدئ" هو المختار الآن):**
    *   في قسم "صلاحيات الدور: محاسب مبتدئ":
        *   **موديول الحسابات:**
            *   `accounting.view` (عرض): حدد المربع (للسماح بعرض البيانات المحاسبية).
            *   `accounting.create` (إنشاء): حدد المربع (للسماح بإنشاء قيود يومية).
            *   `accounting.edit` (تعديل): لا تحدد المربع (لمنعه من تعديل القيود التي أنشأها غيره أو قيود مرحّلة).
            *   `accounting.delete` (حذف): لا تحدد المربع.
            *   `accounting.approve` (اعتماد): لا تحدد المربع.
        *   **موديول المبيعات:**
            *   `sales.view` (عرض): قد تحدده إذا كان يحتاج للاطلاع على فواتير المبيعات لأغراض محاسبية.
            *   بقية صلاحيات المبيعات: لا تحددها.
        *   **بقية الموديولات:** (المخزون، الموارد البشرية، إلخ): لا تحدد أي صلاحيات إذا لم يكن من مهامه.
3.  **حفظ الصلاحيات:**
    *   اضغط على زر "**حفظ صلاحيات هذا الدور**".

**كيف يعمل النظام داخليًا (بشكل مبسط):**

*   عندما يتم تعيين دور لمستخدم ما (في قسم "إدارة المستخدمين")، يرتبط هذا المستخدم بجميع الصلاحيات المحددة لهذا الدور.
*   عندما يحاول المستخدم القيام بأي عملية في النظام (مثل عرض صفحة، إنشاء سجل، تعديل بيانات)، يقوم النظام بالتحقق مما إذا كان الدور الخاص بهذا المستخدم يمتلك الصلاحية المطلوبة لهذه العملية ضمن هذا الموديول.
*   إذا كانت الصلاحية ممنوحة، يُسمح للمستخدم بالقيام بالعملية.
*   إذا لم تكن الصلاحية ممنوحة، يتم منعه وعادة ما تظهر له رسالة تفيد بعدم امتلاكه للصلاحيات الكافية.

بهذه الطريقة، يمكنك التحكم بشكل دقيق في ما يمكن لكل مستخدم (بناءً على دوره) أن يراه أو يفعله داخل كل جزء من أجزاء نظام ERP.
